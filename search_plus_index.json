{"./":{"url":"./","title":"Introduction","keywords":"","body":"Introduction å­¦ä¹ element-uiæºç å¹¶æ­å»ºè‡ªå·±çš„ä¸šåŠ¡UIåº“ steam-game-ui powered by Gitbookè¯¥æ–‡ä»¶ä¿®è®¢æ—¶é—´ï¼š 2019-09-12 00:10:40 "},"structures/å·¥ä½œæµ.html":{"url":"structures/å·¥ä½œæµ.html","title":"å·¥ä½œæµ","keywords":"","body":"åŸºäºvue-cli3 steam-game-uiåŸºäºvue-cli3æ­å»ºçš„è„šæ‰‹æ¶æ¥å¼€å‘ã€‚æˆ‘ä»¬éœ€è¦æŠŠç»„ä»¶åº“é€šè¿‡libæ¨¡å¼æ‰“åŒ… npm run build:file && vue-cli-service build --target lib --name steam-game-ui --dest lib packages/index.js è¿˜éœ€è¦åœ¨vue.config.jsé‡Œé¢mergeåˆ«åé…ç½®å’Œbabelè½¬ä¹‰ config.resolve.alias .set('@', path.resolve('examples')) .set('src', path.resolve('src')) .set('packages', path.resolve('packages')) .set('examples', path.resolve('examples')); config.module .rule('js') .include.add(/packages/) .end() .include.add(/examples/) .end() .use('babel') .loader('babel-loader') .tap(options => { return options; }) .end(); å¼€å‘æµç¨‹ å¼€å‘æ–°ç»„ä»¶å‘½ä»¤ npm run new ç»„ä»¶å [ç»„ä»¶ä¸­æ–‡å] npm run new button æŒ‰é’® npm run serve å‘å¸ƒæ­¥éª¤ğŸ‘‡ npm run test npm version patch npm run lib git add . git commit --amend npm publish ä»£ç è§„èŒƒ .editorconfigé…ç½®ğŸ‘‡ [*.{js,jsx,ts,tsx,vue}] indent_style = space indent_size = 2 trim_trailing_whitespace = true insert_final_newline = true .prettierrcé…ç½®ğŸ‘‡ { \"trailingComma\": \"none\", \"singleQuote\": true, \"semi\": true, \"tabWidth\": 2, \"semicolons\": true, \"bracketSpacing\": true } .eslintrcé…ç½®ğŸ‘‡ module.exports = { root: true, parserOptions: { parser: 'babel-eslint' }, env: { browser: true }, extends: [ 'plugin:vue/essential', '@vue/standard' ], rules: { 'prefer-promise-reject-errors': 0, 'no-debugger': process.env.NODE_ENV === 'production' ? 2 : 0, 'arrow-parens': 0, 'generator-star-spacing': 0, 'space-before-function-paren': 0, 'semi': ['error', 'always'], 'indent': 0, 'no-fallthrough': 0, 'eqeqeq': 0, 'one-var': 0, 'no-extra-boolean-cast': 0, 'camelcase': 0, 'no-mixed-operators': 0, 'eol-last': 0 } } è‡ªåŠ¨éƒ¨ç½² å®˜ç½‘ç›´æ¥éƒ¨ç½²åœ¨github pagesä¸Šï¼Œé€šè¿‡travisæ¥åšè·‘æµ‹è¯•å’Œè‡ªåŠ¨åŒ–éƒ¨ç½² language: node_js env: global: - GH_REF: github.com/meishaFE/steam-game-ui.git cache: directories: - ~/.npm - node_modules node_js: - '9' install: - npm install script: - npm run test - npm run build after_script: - cd ./dist - git init - git add . - git commit -m \"Travis CI Auto Builder\" - git push --force --quiet \"https://${TOKEN_AARON}@${GH_REF}\" master:gh-pages powered by Gitbookè¯¥æ–‡ä»¶ä¿®è®¢æ—¶é—´ï¼š 2019-09-12 00:10:40 "},"structures/ç”Ÿæˆæ–‡æ¡£å’Œç¤ºä¾‹.html":{"url":"structures/ç”Ÿæˆæ–‡æ¡£å’Œç¤ºä¾‹.html","title":"ç”Ÿæˆæ–‡æ¡£å’Œç¤ºä¾‹.md","keywords":"","body":"éœ€æ±‚èƒŒæ™¯ ç»„ä»¶åº“è¦è¢«äººå®¶ä½¿ç”¨ï¼Œæ‰€ä»¥ä¸€å®šéœ€è¦æœ‰ä½¿ç”¨demoå’ŒAPIè§£æã€‚è¿™ä¸¤ä¸ªå·¥ä½œæ˜¯å¯ä»¥åˆå¹¶åœ¨åŒä¸€ä»½markdownæ–‡ä»¶é‡Œé¢çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æå–markdowné‡Œé¢çš„ä»£ç ç‰‡æ®µï¼Œç„¶åæ¸²æŸ“æˆdemoå°±å¯ä»¥ï¼Œè¿™å—æˆ‘ä»¬æ‰‹å†™ä¸€ä¸ªloaderæ¥å¤„ç†ï¼Œå…·ä½“çš„é€»è¾‘åœ¨build/markdown-loader.jsé‡Œé¢ã€‚ æ·»åŠ loader æˆ‘ä»¬è¦è½¬æ¢.mdæ–‡ä»¶ä¸ºHTMLæ ‡ç­¾ï¼ŒåŒæ—¶æå–é‡Œé¢çš„ä»£ç å—ï¼Œç„¶åå¯¹ä»£ç å—åšä¸€äº›è‡ªå®šä¹‰å¤„ç†ï¼Œæœ€åè¿”å›vueå•æ–‡ä»¶ç»„ä»¶æ¨¡æ¿ï¼Œä¼ é€’ç»™vue-loaderå»è§£æã€‚å¤šloaderæ˜¯ä¸²è”é“¾å¼è°ƒç”¨çš„ï¼ŒæŒ‰é€†åºæ‰§è¡Œï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨vue.config.jsé‡Œé¢æ·»åŠ ä¸‹é¢å¯¹.mdçš„å¤„ç†ğŸ‘‡ config.module .rule('md') .test(/\\.md/) .use('vue-loader') .loader('vue-loader') .options({ compilerOptions: { preserveWhitespace: false } }) .end() .use('markdown-loader') .loader( require('path').resolve(__dirname, './build/markdown-loader.js') ) .end(); loaderé€»è¾‘ markdown-itè¿™ä¸ªåº“å¯ä»¥æŠŠMarkdownæ–‡æ¡£è½¬æ¢æˆHTMLæ ‡ç­¾ï¼Œé…åˆmarkdown-it-containerè¿™ä¸ªæ’ä»¶å¯ä»¥æå–ç‰¹å®šæ ‡ç­¾å†…å†…å®¹ã€‚åœ¨steam-game-uié‡Œé¢æˆ‘ä»¬å®šä¹‰:::demo ä»£ç å— :::é‡Œé¢çš„ä»£ç å—éœ€è¦è¢«æ¸²æŸ“æˆVueç»„ä»¶ã€‚ const md = require('markdown-it')(); const VueTemplateComplier = require('vue-template-compiler'); const { parse, compileTemplate } = require('@vue/component-compiler-utils'); let componentCodeList = []; md.use(require('markdown-it-container'), 'demo', { // éªŒè¯ä»£ç å—ä¸ºã€:::demo :::ã€‘æ‰è¿›è¡Œæ¸²æŸ“ validate: function(params) { return params.trim().match(/^demo\\s+(.*)$/); }, // ä»£ç å—æ¸²æŸ“ render: function (tokens, idx) { const token = tokens[index]; const tokenInfo = token.info.trim().match(/^demo\\s*(.*)$/); if (token.nesting === 1) { // å¼€å§‹æ ‡ç­¾ // è·å–demoçš„ç¬¬ä¸€è¡Œä»£ç æè¿°ï¼Œå³::: demo xxx ä¸­çš„xxx const desc = tokenInfo && tokenInfo.length > 1 ? tokenInfo[1] : ''; // è·å–demoä¸­éœ€è¦æ¸²æŸ“çš„å†…å®¹ const nextIndex = tokens[index + 1]; const content = nextIndex.type === 'fence' ? nextIndex.content : ''; // å°†contentè§£æä¸ºvueç»„ä»¶åŸºæœ¬å±æ€§å¯¹è±¡ let { template, script, styles } = parse({ source: content, compiler: VueTemplateComplier, needMap: false }); // å°†contentçš„å†…å®¹åˆ†åˆ«æç‚¼å‡ºæ¥å¹¶è½¬ç ï¼Œç»™codepenä½œä¸ºæäº¤è¡¨å•ä½¿ç”¨ let rawCodepen = { html: (template && template.content || '').replace(/^(\\/|\\n)*/g, ''), js: (script && script.content || '').replace(/^(\\/|\\n)*/g, ''), css: (styles && styles.content || '').replace(/^(\\/|\\n)*/g, '') }; let codepen = markdownIt.utils.escapeHtml(JSON.stringify(rawCodepen)); // å°†templateè½¬ä¸ºrenderå‡½æ•° const { code } = compileTemplate({ source: template.content, compiler: VueTemplateComplier }); styleCodeList = styleCodeList.concat(styles); // è·å–scriptçš„ä»£ç  script = script ? script.content : ''; if (script) { script = script.replace( /export\\s+default/, 'const exportJavaScript =' ); } else { script = 'const exportJavaScript = {} ;'; } // å°†ä»£ç è§£ææˆvueç»„ä»¶å­˜å‚¨ï¼Œç„¶ååœ¨æ¸²æŸ“htmlä¸­å¼•ç”¨è¯¥ç»„ä»¶ const name = `st-demo-${componentCodeList.length}`; componentCodeList.push(`\"${name}\":(function () { ${code} ${script} return { ...exportJavaScript, render, staticRenderFns } })()`); // å°†éœ€è¦æ¸²æŸ“çš„ç¤ºä¾‹ç”¨code-blockç»„ä»¶åŒ…è£¹æ›¿æ¢æ’æ§½æ˜¾ç¤ºç¤ºä¾‹æ•ˆæœ return ` ${markdownIt.render(desc)} `; } return ` `; } } }); æ ¸å¿ƒé€»è¾‘å¦‚ä¸Šï¼Œè·å–åˆ°æ¯ä¸€å—:::demo ä»£ç å— :::é‡Œé¢çš„ä»£ç å—ï¼Œç„¶ååˆ†åˆ«è·å–åˆ°ä»£ç å—é‡Œé¢çš„HTMLæ¨¡æ¿ã€è„šæœ¬å’Œæ ·å¼ï¼Œä»–ä»¬æœ‰ä¸¤ä¸ªä½œç”¨ï¼Œä¸€æ˜¯ä¼ ç»™æˆ‘ä»¬çš„è‡ªå®šä¹‰ç»„ä»¶code-blockï¼Œåœ¨é‡Œé¢æˆ‘ä¼šå¯¹ä»£ç å—åšä¸€äº›æ ·å¼å’ŒåŠŸèƒ½æ€§çš„å°è£…ï¼›äºŒæ˜¯ç»„åˆæˆcodepençš„æäº¤å‚æ•°ï¼Œcodepenæ˜¯ä¸€ä¸ªåœ¨çº¿ä»£ç ç¼–è¾‘å¹³å°ï¼Œå®ƒå¯ä»¥é€šè¿‡è¡¨å•æäº¤ä»£ç ç„¶åè·³è½¬æ¼”ç¤ºï¼ŒåŒæ ·çš„å¹³å°è¿˜æœ‰jsfiddleå’Œjsbinç­‰ã€‚è¿™é‡Œé¢æˆ‘ä½¿ç”¨vue-template-compilerå»æå–æ¨¡æ¿å˜é‡ï¼Œä½†æ˜¯ä½ ä¹Ÿå¯ä»¥ç”¨åˆ«çš„æ–¹å¼å»æå–ï¼Œæ¯”å¦‚cheerioğŸ‘‡ const cheerio = require('cheerio'); function fetch (str, tag) { var $ = cheerio.load(str, { decodeEntities: false }); if (!tag) return str; return $(tag).html(); } // ... let codepen = { html: fetch(content, 'template'), js: fetch(content, 'script'), css: fetch(content, 'style') }; å› ä¸ºä¸€ä»½æ–‡æ¡£é‡Œé¢æœ‰å¤šä¸ªdemoï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸€ä¸ªcomponentCodeListå»å­˜å‚¨æ¯ä¸ªä»£ç å—ï¼Œç„¶åæœ€ç»ˆéå†æ’å…¥ï¼Œæœ€ç»ˆç”Ÿæˆä¸‹é¢è¿™ä¸ªæ¨¡æ¿å¹¶è¿”å› ` ${markdownIt.render(source)} export default { name: 'st-doc', components: { ${componentCodeList.join(',')} } } ${Array.from(styleCodeList, m => m.content).join('\\n')} ` é™¤äº†å¤„ç†demoå†…çš„ä»£ç å—ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å¯¹markdown-itç”Ÿæˆçš„HTMLæ ‡ç­¾åšä¸€äº›å¤„ç†ï¼Œå®ƒæœ¬èº«æä¾›ä¸€äº›ruleå…è®¸ä½ å¯¹å®ƒè¿›è¡Œä¸€äº›æ“ä½œï¼Œæ¯”å¦‚ç»™tableæ ‡ç­¾æ›¿æ¢ä¸€ä¸ªç±»åğŸ‘‡ markdownIt.renderer.rules.table_open = function() { return ''; }; åŒæ—¶ä½ ä¹Ÿå¯ä»¥é€šè¿‡fenceè‡ªå·±å®šä¹‰æŸäº›æ ‡ç­¾çš„æ¸²æŸ“è§„åˆ™ï¼Œæ¯”å¦‚å¦‚æœåœ¨æ¨¡æ¿ä¸­ç”¨åˆ°æ’å€¼{{ xx }}ï¼Œå› ä¸ºæˆ‘ä»¬æŠŠæ•´ä¸ªæ–‡æœ¬è¿”å›ç»™vue-loaderå¤„ç†ï¼Œå¦‚æœä¸å¯¹åŒå¤§æ‹¬å·åšå¤„ç†çš„è¯ï¼Œåœ¨æ˜¾ç¤ºçº¯æ–‡æœ¬çš„ä»£ç çš„æ—¶å€™ï¼ŒåŒå¤§æ‹¬å·ä¹Ÿä¼šå˜è§£ææˆæ¨¡æ¿ï¼Œåœ¨çˆ¶ç»„ä»¶å†…å°±ä¼šæŠ¥é”™æ‰¾ä¸åˆ°è¯¥å˜é‡ï¼Œæ‰€ä»¥éœ€è¦å†™ä¸€ä¸ªå‡½æ•°æ›¿æ¢åŒå¤§æ‹¬å·ğŸ‘‡ markdownIt.renderer.rules.fence = genInlineLabel(markdownIt.renderer.rules.fence); function genInlineLabel (render) { return function() { return render.apply(this, arguments) .replace('{{', '{ { ') .replace('}}', ' } }'); }; } CodeBlockç»„ä»¶ ä»ä¸Šé¢çœ‹åˆ°æˆ‘ä»¬æŠŠtemplateï¼Œjsï¼Œcssæå–å‡ºæ¥ä¹‹åéƒ½æ³¨å…¥åˆ°äº†CodeBlockè¿™ä¸ªç»„ä»¶å½“ä¸­ï¼Œè¿™ä¸ªç»„ä»¶ä¸»è¦å°±æ˜¯åšä¸€äº›æ ·å¼ä¸Šçš„å¤„ç†åŒæ—¶æ·»åŠ è·³è½¬codepençš„æ–¹æ³•ğŸ‘‡ goCodepen() { // https://blog.codepen.io/documentation/api/prefill const { js, html, css } = this.codepen; const resourcesTpl = '' + '\\n'; let jsTpl = (js || '').replace(/export default/, 'var Main =').trim(); let htmlTpl = `${resourcesTpl}\\n\\n${html.trim()}\\n`; jsTpl = jsTpl ? jsTpl + \"\\nvar Ctor = Vue.extend(Main)\\nnew Ctor().$mount('#app')\" : \"new Vue().$mount('#app')\"; let cssTpl = `html { font-size: 100px; } #app{ font-size: 14px; }\\n${css || ''}`; const data = { js: jsTpl, css: cssTpl, html: htmlTpl }; const form = document.getElementById('fiddle-form') || document.createElement('form'); while (form.firstChild) { form.removeChild(form.firstChild); } form.method = 'POST'; form.action = 'https://codepen.io/pen/define/'; form.target = '_blank'; form.style.display = 'none'; const input = document.createElement('input'); input.setAttribute('name', 'data'); input.setAttribute('type', 'hidden'); input.setAttribute('value', JSON.stringify(data)); form.appendChild(input); document.body.appendChild(form); form.submit(); } è¿™é‡Œè¦æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬éœ€è¦ç»™codepenå†™ä¸€æ®µæ³¨å…¥çš„ä»£ç ï¼Œå»å¼•ç”¨æˆ‘ä»¬å½“å‰å·²å‘å¸ƒçš„æœ€æ–°ç‰ˆæœ¬çš„ä»£ç åŒ…ï¼Œå› ä¸ºç»„ä»¶åº“æ‰˜ç®¡åœ¨npmä¸Šï¼Œæ‰€ä»¥æˆ‘è¿™é‡Œå¼•ç”¨çš„æ˜¯unpkg.comä¸Šçš„ä»£ç åŒ…ï¼Œåªè¦ä½ çš„åŒ…åœ¨npmä¸Šå‘å¸ƒäº†ï¼Œéƒ½ä¼šè¢«åŒæ­¥åˆ°unpkg.comä¸­ã€‚æœ€åæˆ‘ä»¬åœ¨main.jsä¸­å…¨å±€æ³¨å†ŒcodeBlockç»„ä»¶Vue.component('code-block', codeBlock)ï¼Œè¿™æ ·å­å°±å¯ä»¥åœ¨æ‰€æœ‰åœ°æ–¹å¼•ç”¨è¯¥ç»„ä»¶äº† æ€»ç»“ æ•´ä¸ªæµç¨‹æ˜¯ä¸¤éƒ¨åˆ†ï¼šç¬¬ä¸€éƒ¨åˆ†æŠŠMarkdownæ–‡ä»¶è½¬æˆHTMLæ ‡ç­¾ï¼Œç¬¬äºŒéƒ¨åˆ†æå–:::demo ä»£ç å— :::ä»£ç å—é‡Œé¢çš„å†…å®¹ä¼ ç»™å…¨å±€çš„codeBlockç»„ä»¶ï¼Œç„¶åæŠŠä¸€äºŒéƒ¨åˆ†åˆæˆä¸€ä¸ªç»„ä»¶æ¨¡æ¿ï¼Œä¼ ç»™vue-loaderå»æ¸²æŸ“ï¼Œåœ¨å®˜ç½‘ä¸­æˆ‘ä»¬åªéœ€è¦åœ¨è·¯ç”±é‡Œé¢å¼•ç”¨Markdownæ–‡ä»¶å°±å¯ä»¥äº†ã€‚å…·ä½“çš„ä»£ç é€»è¾‘åœ¨build/markdown-loader.js powered by Gitbookè¯¥æ–‡ä»¶ä¿®è®¢æ—¶é—´ï¼š 2019-09-12 00:10:40 "},"structures/åˆå§‹åŒ–æ–°ç»„ä»¶.html":{"url":"structures/åˆå§‹åŒ–æ–°ç»„ä»¶.html","title":"åˆå§‹åŒ–æ–°ç»„ä»¶","keywords":"","body":"çº¦å®šä¼˜äºé…ç½® ç®€å•è¯´å°±æ˜¯ç”¨çº¦å®šå¥½çš„è§„åˆ™ä½œä¸ºæ¡†æ¶æ¥å†™ä»£ç ã€‚åœ¨steam-game-uiä¸­ä¸€ä¸ªæ¯æ¬¡è¦æ–°åŠ ä¸€ä¸ªæ–°çš„ç»„ä»¶è¦åšä»¥ä¸‹å‡ ä»¶äº‹ï¼š å¾€packagesæ–‡ä»¶å¤¹é‡Œé¢æ·»åŠ ç»„ä»¶æ–‡ä»¶ã€æ–‡æ¡£å’Œå¯¼å‡ºç»„ä»¶çš„index.js åœ¨æ‰“åŒ…å…¥å£å¼•å…¥å’Œå¯¼å‡ºæ–°ç»„ä»¶ å¾€examplesæ–‡ä»¶å¤¹é‡Œé¢æ·»åŠ è·¯ç”±å¼•å…¥ç»„ä»¶ä»¥åŠæ·»åŠ å¯¼èˆª å¾€testsæ–‡ä»¶å¤¹é‡Œé¢æ·»åŠ å•å…ƒæµ‹è¯•æ–‡ä»¶ å®ƒä»¬çš„é…ç½®éƒ½æ˜¯åˆ†æ•£çš„ï¼Œä¸ç†Ÿæ‚‰é¡¹ç›®ç»“æ„çš„äººå®¹æ˜“å¿½ç•¥å…¶ä¸­çš„æŸä¸€ä¸ªæ­¥éª¤ï¼Œè€Œä¸”åˆ†æ•£çš„é…ç½®ä¹Ÿå®¹æ˜“å¯¼è‡´å‡ºé”™ï¼Œæ—¶é—´ä¸€é•¿æ¯æ¬¡æ·»åŠ ç»„ä»¶çš„æ—¶å€™å¯èƒ½è¿˜å¾—å…ˆæŸ¥çœ‹ä¸€ä¸‹ä»£ç é€»è¾‘ã€‚æ‰€ä»¥åœ¨steam-game-uiä¸­æŠŠéƒ¨åˆ†é…ç½®å•ç‹¬æå–å‡ºæ¥ï¼ŒåŒæ—¶æ–°å¢npm run new ç»„ä»¶å [ç»„ä»¶ä¸­æ–‡å]å‘½ä»¤åˆå§‹åŒ–æ–°çš„ç»„ä»¶ã€‚ åˆ›å»ºæ–°æ–‡ä»¶ ä¸€ä¸ªæ–°çš„ç»„ä»¶éœ€è¦æ–°å»ºä»¥ä¸‹æ–‡ä»¶ï¼špackages/ç»„ä»¶/ç»„ä»¶.vueã€packages/ç»„ä»¶/index.jsã€packages/ç»„ä»¶/docs/index.mdã€tests/specs/ç»„ä»¶.spec.jsï¼Œä»–ä»¬çš„åˆå§‹åŒ–æ¨¡æ¿éƒ½æ˜¯å…±æ€§çš„ï¼Œæˆ‘ä»¬åªéœ€è¦è·å–ç»„ä»¶çš„åç§°å’Œä¸­æ–‡åç§°å°±å¯ä»¥ç”Ÿæˆäº†ï¼Œè¿™é‡Œæ‹¿packages/ç»„ä»¶/ç»„ä»¶.vueä¸¾ä¸ªç®€å•çš„ä¾‹å­ğŸ‘‡ const Files = [{ filename: path.join(`${ComponentName}.vue`), content: ` æ–°ç»„ä»¶ export default { name: 'St${ComponentName}' }; ` }] // åˆ›å»º package Files.forEach(file => { fileSave(path.join(PackagePath, file.filename)) .write(file.content, 'utf8') .end('\\n'); }); æˆ‘ä»¬å†™äº†ä¸€ä¸ªFilesçš„æ¨¡æ¿åˆ—è¡¨ï¼Œç„¶åæ¯ä¸€ä¸ªæ¨¡æ¿éœ€è¦æä¾›filenameæ¨¡æ¿è·¯å¾„å’Œcontentæ¨¡æ¿å†…å®¹ï¼Œç„¶åéå†åˆ—è¡¨ç”¨fsç”Ÿæˆå¯¹åº”çš„æ–‡ä»¶ã€‚å…¶ä»–çš„æ–‡ä»¶ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œåªéœ€è¦å¾€Filesåˆ—è¡¨é‡Œé¢æ–°å¢æ¨¡æ¿å°±å¯ä»¥äº†ï¼Œå…·ä½“çš„æ¨¡æ¿å‚è€ƒbuild/new.jsé‡Œé¢çš„é…ç½®ã€‚ è‡ªåŠ¨å¼•å…¥ç»„ä»¶ åœ¨æ‰“åŒ…å…¥å£çš„packages/index.jséœ€è¦å¼•ç”¨å’Œå¯¼å‡ºç»„ä»¶ï¼ŒåŒæ—¶è¿˜éœ€è¦å¯¼å‡ºä¸€ä¸ªinstallæ–¹æ³•ï¼Œåœ¨installä¸­é™¤äº†éƒ¨åˆ†ç»„ä»¶æœ‰æŒ‡ä»¤æˆ–è€…æœåŠ¡çš„æ–¹å¼è°ƒç”¨ï¼Œå…¶ä»–çš„éƒ½æ˜¯æ³¨å†Œä¸€ä¸‹ç»„ä»¶å°±å¯ä»¥äº†ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥æŠŠæ‰€æœ‰çš„ç»„ä»¶åˆ—æˆä¸€ä»½ç»„ä»¶æ¸…å•components.jsonï¼Œç„¶åæ ¹æ®è¿™ä»½ç»„ä»¶æ¸…å•å’Œæ¨¡æ¿å»è‡ªåŠ¨ç”Ÿæˆpackages/index.jsï¼Œå› ä¸ºæŒ‡ä»¤å’ŒæœåŠ¡è°ƒç”¨çš„ç»„ä»¶æœ‰é™ï¼Œæ‰€ä»¥è¿™éƒ¨åˆ†çš„è°ƒç”¨æˆ‘ä»¬è¿˜æ˜¯å†™æ­»åœ¨æ¨¡æ¿é‡Œé¢ã€‚è¿™å—çš„å·¥ä½œå› ä¸ºå°±æ˜¯æ‰“åŒ…çš„è¿‡ç¨‹ï¼Œæˆ‘æ”¾åœ¨build\\build-entry.jsé‡Œé¢ï¼ŒåŒæ—¶å› ä¸ºéœ€è¦ç”¨åˆ°æ’å€¼ï¼Œæ‰€ä»¥è¿™é‡Œä½¿ç”¨äº†ä¸€ä¸ªæ¨¡æ¿å¼•æ“ï¼Œéå†components.jsonç„¶åæ¸²æŸ“æ¨¡æ¿ï¼Œæœ€åé€šè¿‡fså»ç”Ÿæˆæ–‡ä»¶ã€‚ components.jsonçš„è‡ªåŠ¨ç”Ÿæˆè¿‡ç¨‹å’Œä¸Šé¢çš„ç”Ÿæˆæ–‡ä»¶ä¸€æ · { \"button\": \"packages/button/index.js\", \"icon\": \"packages/icon/index.js\", \"loading\": \"packages/loading/index.js\", \"message\": \"packages/message/index.js\", \"clickoutside\": \"packages/clickoutside/index.js\" } build\\build-entry.jsåŒ…æ‹¬ä¸€ä¸ªæ¨¡æ¿å’Œæ¨¡æ¿çš„æ’å€¼é€»è¾‘ï¼Œç„¶åç”Ÿæˆæ–‡ä»¶ï¼Œä»£ç å¦‚ä¸‹ğŸ‘‡ %accordion%ç‚¹å‡»æŸ¥çœ‹æŠ˜å ä»£ç %accordion% var components = require('./../components.json'); var fs = require('fs'); var render = require('json-templater/string'); var uppercamelcase = require('uppercamelcase'); var path = require('path'); var endOfLine = require('os').EOL; var OUTPUT_PATH = path.join(__dirname, './../packages/index.js'); var IMPORT_TEMPLATE = 'import {{name}} from \\'packages/{{package}}/index.js\\';'; var INSTALL_COMPONENT_TEMPLATE = ' {{name}}'; var MAIN_TEMPLATE = `/* Automatically generated by './build/gen-components-index.js' */ {{include}} import 'src/style/icon.scss'; const components = [ {{install}} ]; const install = function (Vue, opts = {}) { components.forEach(component => { Vue.component(component.name, component); }); Vue.use(Loading.directive); Vue.directive('clickoutside', Clickoutside); Vue.prototype.$message = Message; Vue.prototype.$loading = Loading.service; }; if (typeof window !== 'undefined' && window.Vue) { install(window.Vue); } export default { version: '{{version}}', install, {{list}} }; `; var componentNames = Object.keys(components); var includeComponentTemplate = []; var installTemplate = []; var listTemplate = []; componentNames.forEach(name => { let componentName = uppercamelcase(name); includeComponentTemplate.push(render(IMPORT_TEMPLATE, { name: componentName, package: name })); if (['Loading', 'Message', 'Clickoutside'].indexOf(componentName) === -1) { installTemplate.push(render(INSTALL_COMPONENT_TEMPLATE, { name: componentName, component: name })); } if (['Loading', 'Message', 'Clickoutside', 'Icon'].indexOf(componentName) === -1) { listTemplate.push(` ${componentName}`); } }); var template = render(MAIN_TEMPLATE, { include: includeComponentTemplate.join(endOfLine), install: installTemplate.join(',' + endOfLine), version: process.env.VERSION || require('./../package.json').version, list: listTemplate.join(',' + endOfLine) }); fs.writeFileSync(OUTPUT_PATH, template); %/accordion% é…ç½®å¯¼èˆª è¿™ä¸€å—ä¹Ÿå•ç‹¬æŠ½æˆä¸€ä¸ªé€šç”¨é…ç½®nav.config.jsonï¼Œè¿™é‡Œä¸ä»…æœ‰ç»„ä»¶çš„å¯¼èˆªä¹Ÿæœ‰ä¸€äº›å…¬å…±çš„æ–‡æ¡£çš„å¯¼èˆªï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬å•ç‹¬ç”¨ä¸€ä¸ªcomponentså­—æ®µæ¥ç»´æŠ¤ç»„ä»¶çš„å¯¼èˆªï¼Œåœ¨newæ–°ç»„ä»¶çš„æ—¶å€™å°±å¾€componentsé‡Œé¢pushæ–°çš„ç»„ä»¶ã€‚åœ¨å®˜ç½‘é‡Œé¢åªéœ€è¦è¯»å–è¿™ä»½jsonç„¶åæ·»åŠ åˆ°å¯¼èˆªä¸Šå°±å¯ä»¥äº†ã€‚ { \"guide\": { \"name\": \"å¼€å‘æŒ‡å—\", \"children\": [{ \"name\": \"å¿«é€Ÿä¸Šæ‰‹\", \"path\": \"/quickstart\", \"docsPath\": \"examples/guide/quickstart.md\" }, { \"name\": \"å‚ä¸å¼€å‘\", \"path\": \"/develop\", \"docsPath\": \"examples/guide/develop.md\" }] }, \"components\": { \"name\": \"ç»„ä»¶\", \"children\": [ { \"name\": \"Icon å›¾æ ‡\", \"path\": \"/icon\", \"docsPath\": \"packages/icon/docs/index.md\" }, { \"name\": \"Button æŒ‰é’®\", \"path\": \"/button\", \"docsPath\": \"packages/button/docs/index.md\" } ] } } æ–°ç»„ä»¶çš„æ·»åŠ é€»è¾‘ğŸ‘‡ // æ·»åŠ åˆ° nav.config.json const navConfigFile = require('./../examples/nav.config.json'); navConfigFile['components'].children.push({ name: componentname !== chineseName ? `${ComponentName} ${chineseName}` : ComponentName, path: `/${componentname}`, docsPath: `packages/${componentname}/docs/index.md` }); fileSave(path.join(__dirname, './../examples/nav.config.json')) .write(JSON.stringify(navConfigFile, null, ' '), 'utf8') .end('\\n'); é…ç½®è·¯ç”± è·¯ç”±çš„é…ç½®åŒæ ·ä¹Ÿæ˜¯ä¾æ®nav.config.jsonè¿™ä»½é…ç½®ï¼Œå› ä¸ºæˆ‘ä»¬æŠŠæ¨¡å—çš„è·¯å¾„é€šè¿‡å˜é‡çš„æ–¹å¼æå–å‡ºæ¥äº†ï¼Œæ‰€ä»¥è¿™é‡Œè¿˜ä¼šæ¶‰åŠåˆ°ä¸€ä¸ªå…³äºä¾èµ–ç®¡ç†çš„çŸ¥è¯†ç‚¹ã€‚æˆ‘ä»¬çŸ¥é“webpackæ˜¯é™æ€ç¼–è¯‘ï¼Œå½“requireçš„è·¯å¾„æœ‰è¡¨è¾¾å¼çš„æ—¶å€™ï¼Œç¼–è¯‘é˜¶æ®µæ— æ³•çŸ¥é“è¦å¼•å…¥å“ªäº›æ–‡ä»¶ã€‚ä½†æ˜¯webpackä¼šæ ¹æ®è¡¨è¾¾å¼çš„å†…å®¹åŒºæ‹†åˆ†æˆä¸€ä¸ªè·¯å¾„å’Œæ–‡ä»¶åï¼Œç„¶åæŠŠè·¯å¾„ä¸‹çš„æ–‡ä»¶å…¨éƒ¨å¼•å…¥ï¼Œå½“è¿è¡Œæ—¶çš„æ—¶å€™å†å»è§£æè¡¨è¾¾å¼ï¼Œç„¶åå»åŒ¹é…å¼•å…¥çš„æ–‡ä»¶ã€‚æ‰€ä»¥webpackèƒ½å¤Ÿæ”¯æŒåŠ¨æ€åœ°requireï¼Œä½†ä¼šå¯¼è‡´æ‰€æœ‰å¯èƒ½ç”¨åˆ°çš„æ¨¡å—éƒ½åŒ…å«åœ¨bundle ä¸­ã€‚ä½†æ˜¯é€šè¿‡require.contextå¯ä»¥è®©æˆ‘ä»¬æ‰‹åŠ¨åˆ›å»ºä¸€ä¸ªç¬¦åˆæˆ‘ä»¬è‡ªå®šä¹‰è§„åˆ™çš„å¼•ç”¨ä¸Šä¸‹æ–‡ï¼Œè¿™æ ·å°±èƒ½å¤Ÿç²¾å‡†å¾—è·å–åˆ°æˆ‘ä»¬åªéœ€è¦ç”¨åˆ°çš„æ¨¡å—ã€‚è¯­æ³•å¦‚ä¸‹ require.context(directory, useSubdirectories = false, regExp = /^\\.\\//); é¡¹ç›®å†…çš„å…·ä½“é…ç½®å¦‚ä¸‹ğŸ‘‡ import Vue from 'vue'; import navConfig from './nav.config'; import Router from 'vue-router'; import Home from './views/Home.vue'; Vue.use(Router); let navs = []; const componentsContext = require.context('./../packages/', true, /\\.md/); const componentsContextKeys = componentsContext.keys(); const guideContext = require.context('./../examples/', true, /\\.md/); const guideContextKeys = guideContext.keys(); Object.keys(navConfig).forEach(group => { navConfig[group].children.forEach(nav => { if (nav.path && nav.docsPath) { let docsPath = nav.docsPath.replace(/examples|packages/, '.'); let isGuide = guideContextKeys.indexOf(docsPath) > -1; let isComponent = componentsContextKeys.indexOf(docsPath) > -1; if (isGuide || isComponent) { navs.push({ path: nav.path, component: isGuide ? guideContext(docsPath).default : componentsContext(docsPath).default }); } } }); }); let router = { mode: 'history', base: process.env.BASE_URL, routes: [ { path: '/', name: 'home', component: Home, children: navs } ] }; export default new Router(router); æ€»ç»“ ç»è¿‡ä¸Šé¢çš„å·¥ä½œï¼Œæˆ‘ä»¬å°±èƒ½å¤Ÿä½¿ç”¨npm run new ç»„ä»¶å [ç»„ä»¶ä¸­æ–‡å]å‘½ä»¤æ¥åˆå§‹åŒ–ä¸€ä¸ªæ–°çš„ç»„ä»¶äº†ï¼Œå…·ä½“çš„ä»£ç æŸ¥çœ‹build/new.js powered by Gitbookè¯¥æ–‡ä»¶ä¿®è®¢æ—¶é—´ï¼š 2019-09-12 00:10:40 "}}